---
name: Testing
menu: Contributing
route: /contributing/testing
---

# Testing the project

> This documentation section is still under development

## Prerequisites

* Docker. Testing is done by running instances of the target DBMS platforms locally in containers.
* The bash shell. The scripts that launch test containers assume this, so they won't run on Windows.

## Testing

1. Open the testing workspace (`test/project.code-workspace`) in VS Code. This gives you a multi-root workspace. The first folder, `root`, shows the `test/*` subtree of the repository. Additional top-level folders giving easy access to the corresponding folders of the `test/docker/` subtree.
2. Accept extension recommendations. The SQLTools extension and the driver extensions for the testing targets will need to be installed. The `ms-azuretools.vscode-docker` extension is optional but these instructions assume you install it.
3. Go to the NPM Scripts view (e.g. run command `Explorer: Focus on NPM Scripts View`). Its tree will show one root folder, `package.json`. In this the `up` script launches containerized services that the bundled drivers can connect to. The `up:*` scripts each launch an individual service in a container, and are useful if you only want to test one driver.
4. Run the `up` script. Example of output is shown below.
5. Select Docker in VS Code activity bar. In the Containers section you should see five running containers.
6. Select SQLTools in activity bar. In the Connections section there are entries for each of the testable targets. Most connect to the port exposed by the corresponding running container. SQLite is an exception because it accesses a local .db file directly.
7. Connect and run queries.

### Connections
There are more connections defined (currently 14) than there are drivers to test (currently 4). Reasons:
- Drivers can have aliases. For example `mtxr.sqltools-driver-pg` is referenced by connections as `PostgreSQL` and as `AWS Redshift`, and it also has the alias `CockroachDB`.
- Drivers can support multiple connection protocol. For example `mtxr.sqltools-driver-mysql` supports the X Protocol as well as the Client/Server Protocol.
- Drivers may need to be tested against multiple server versions. For example one container runs MS SQL Server 2017 another the latest version.

The workspace folder for each driver contains some query files:
- 1.create-some-stuff.sql
- 2.select-some-stuff.sql

### Example output from `up` script
(ignore incorrect coloring)
```
> up
> yarn run preup:mysql && docker-compose -f docker/docker-compose.yml up --build -d

yarn run v1.22.15
$ bash ./docker/mysql/prepare.sh
Done in 0.10s.
Creating network "docker_default" with the default driver
Pulling mssql (mcr.microsoft.com/mssql/server:latest)...
latest: Pulling from mssql/server
85b353ff0ac5: Pull complete
a561de296022: Pull complete
274645b68430: Pull complete
Digest: sha256:ca2d56561e6cc50b175d97aeffc0efe33d661719ab94b826684b3ac5bff41d58
Status: Downloaded newer image for mcr.microsoft.com/mssql/server:latest
Pulling mssql2017 (mcr.microsoft.com/mssql/server:2017-latest)...
2017-latest: Pulling from mssql/server
Digest: sha256:ca2d56561e6cc50b175d97aeffc0efe33d661719ab94b826684b3ac5bff41d58
Status: Downloaded newer image for mcr.microsoft.com/mssql/server:2017-latest
Pulling mysql (mysql:)...
latest: Pulling from library/mysql
e54b73e95ef3: Pull complete
327840d38cb2: Pull complete
642077275f5f: Pull complete
e077469d560d: Pull complete
cbf214d981a6: Pull complete
f4fda5f8b9a8: Pull complete
a41c2763043b: Pull complete
f86b3df6abb1: Pull complete
95b1c2ed2ecf: Pull complete
b0edcd52771b: Pull complete
a3d312b5c835: Pull complete
Digest: sha256:657d78ee56e09101902673adcdd7d2bf03012e759c1aa525eeca28cb0fe1aa7d
Status: Downloaded newer image for mysql:latest
Pulling mysqlv5 (vsamov/mysql-5.1.73:)...
latest: Pulling from vsamov/mysql-5.1.73
30d541b48fc0: Pull complete
8ecd7f80d390: Pull complete
46ec9927bb81: Pull complete
2e67a4d67b44: Pull complete
7d9dd9155488: Pull complete
0b0a5e453b33: Pull complete
e8a67e96f27e: Pull complete
1a233fe4e788: Pull complete
679cc5f63dfc: Pull complete
cb730efe6d35: Pull complete
7d5b1100bc65: Pull complete
Digest: sha256:ef03d57334761ca1e3d93cbd9f83ee1f93dafd7cac74203fbf97f20ac098c82b
Status: Downloaded newer image for vsamov/mysql-5.1.73:latest
Pulling pgsql (postgres:)...
latest: Pulling from library/postgres
461246efe0a7: Pull complete
8d6943e62c54: Pull complete
558c55f04e35: Pull complete
186be55594a7: Pull complete
f38240981157: Pull complete
e0699dc58a92: Pull complete
066f440c89a6: Pull complete
ce20e6e2a202: Pull complete
c0f13eb40c44: Pull complete
3d7e9b569f81: Pull complete
2ab91678d745: Pull complete
ffc80af02e8a: Pull complete
f3a57056b036: Pull complete
Digest: sha256:3e2eba0a6efbeb396e086c332c5a85be06997d2cf573d34794764625f405df4e
Status: Downloaded newer image for postgres:latest
Creating sqltools_mysqlv5    ... done
Creating sqltools_mssql      ... done
Creating sqltools_mssql-2017 ... done
Creating sqltools_mysql      ... done
Creating sqltools_pgsql      ... done
 *  Terminal will be reused by tasks, press any key to close it.
```
